graph_tests_blackhole_silicon_push:
    build_on_runner: true
    tag: disabled
    owner: [rjakovljevic]
    arch_name: wormhole_b0
    device_runner: Silicon
    test_flow: ./build/test/verif/graph_tests/test_graph
    build_cmd:
      - make -j8 build_hw
      - make -j8 verif/graph_tests   
      
      - echo Copy the netlist files to the test directory verif/graph_tests/netlists
      - rm -fr build/test/verif/graph_tests/netlists
      - mkdir -p build/test/verif/graph_tests/netlists
      - cp -a verif/graph_tests/netlists/. build/test/verif/graph_tests/netlists/
      
      - echo Copy the netlist files to the test directory verif/graph_tests/pybuda_pregenerated
      - rm -rf build/test/verif/graph_tests/pybuda_pregenerated
      - mkdir -p build/test/verif/graph_tests/pybuda_pregenerated
      - cp -a verif/graph_tests/netlists/pybuda_pregenerated/. build/test/verif/graph_tests/pybuda_pregenerated/
      
    build_timeout: '900'
    timeout: '700'
    run_on_same_runner: true
    artifacts: []

  # Sanity tests.
    graph_tests_softmax_single_tile:
        owner: [rpavlovic, mrakita, kmitrovic]
        command:
        -   --netlist build/test/verif/graph_tests/netlists/netlist_softmax_single_tile.yaml --silicon --seed 0

    graph_tests_softmax_single_tile_exp_mm_mult:
        owner: [rpavlovic, mrakita, kmitrovic]
        command:
        -   --netlist build/test/verif/graph_tests/netlists/netlist_softmax_single_tile_exp_mm_mult.yaml --silicon --seed 0
    graph_tests_softmax_single_tile_exp_recip:
        owner: [rpavlovic, mrakita, kmitrovic]
        command:
        -   --netlist build/test/verif/graph_tests/netlists/netlist_softmax_single_tile_exp_recip.yaml --silicon --seed 0

  # Run PyBuda pregenerated tests.
    graph_tests_pybuda_pregenerated_softmax_blackhole:
        owner: [rpavlovic, mrakita, kmitrovic]
        command: [--silicon, --seed, '0']
        multi_test_dir: build/test/verif/graph_tests/pybuda_pregenerated/softmax/blackhole
        multi_test_netlists: true
        multi_test: true
