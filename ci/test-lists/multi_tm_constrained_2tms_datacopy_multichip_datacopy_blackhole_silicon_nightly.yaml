multi_tm_constrained_2tms_datacopy_multichip_datacopy_blackhole_silicon_nightly:
  build_on_runner: True
  tag: disabled
  arch_name: wormhole_b0
  device_runner: Silicon
  harvested_rows_supported: 2
  num_eth_chips: 2

  # test_flow is not used if multi_test_netlists is not set, wheareas multi_test and multi_test_dir are set at test level.
  # Instead, a script per netlist is expected in the directory with netlists that runs the test command.
  test_flow: "./build/test/verif/graph_tests/test_graph"

  build_cmd:
    - "make -j8 build_hw"
    - "make -j8 verif/graph_tests"

    - "mkdir -p build/test/verif/multi_tm_tests/nightly/blackhole"

    - unzip -qo verif/template_netlist/netlists/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_000_force.zip
      -d build/test/verif/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_000_force
    - rm -f build/test/verif/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_000_force/test_configs.yaml

    - unzip -qo verif/template_netlist/netlists/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_100_force.zip
      -d build/test/verif/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_100_force
    - rm -f build/test/verif/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_100_force/test_configs.yaml

  build_timeout: "3500"
  timeout: "500"
  run_on_same_runner: True
  artifacts: []


# ========== Tests ========== #
  test_datacopy_multichip_datacopy_2tms_and_reblock_000_force:
    owner: ["derdeljan", "ajakovljevic"]
    command: ["--silicon"]
    multi_test_dir: "build/test/verif/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_000_force"
    multi_test_netlists: True
    multi_test: True

  test_datacopy_multichip_datacopy_2tms_and_reblock_100_force:
    owner: ["derdeljan", "ajakovljevic"]
    command: ["--silicon"]
    multi_test_dir: "build/test/verif/multi_tm_tests/nightly/blackhole/test_datacopy_multichip_datacopy_2tms_and_reblock_100_force"
    multi_test_netlists: True
    multi_test: True
